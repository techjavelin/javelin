import { a } from '@aws-amplify/backend';

export const PentesterAvailability = a.enum([
  'AVAILABLE',
  'BUSY',
  'OOO'
]);

export const PentesterProfile = a.model({
  userId: a.string().required(), // Cognito username / sub
  handle: a.string().required(),
  certifications: a.string().array(),
  skills: a.string().array(),
  availabilityStatus: a.ref('PentesterAvailability').required(),
  bio: a.string(),
  // Optional rate info (future pricing integration)
  hourlyRate: a.float(),

  createdAt: a.datetime(),
  updatedAt: a.datetime(),
})
.authorization(allow => [
  allow.group('admin'),
  allow.group('pentester').to(['read']),
  // Removed ownersDefinedIn to avoid implicit userId collision; future: implement custom secured update lambda if needed
]);
